# Configuration

Laddr reads configuration from environment variables via Pydantic settings. The `.env` file generated by the CLI contains sensible defaults.

## Key variables

- `DATABASE_URL` – Postgres or SQLite connection string
- `REDIS_URL` – Redis URL for the message bus (or set `QUEUE_BACKEND=memory` for local)
- `MINIO_ENDPOINT`, `MINIO_ACCESS_KEY`, `MINIO_SECRET_KEY`, `MINIO_SECURE` – Object storage settings
- `STORAGE_THRESHOLD_KB` – Size threshold (KB) for offloading large payloads to MinIO
- `*_MODEL` and `*_FALLBACK_MODEL` – Per-agent model selection

## Offload threshold examples

Reduce the threshold to force offloading (e.g., for testing):

```bash
# .env
STORAGE_THRESHOLD_KB=1
```

Disable offloading entirely in development:

```bash
STORAGE_THRESHOLD_KB=0
```

Set programmatically:

```python
from laddr.core.config import LaddrConfig

config = LaddrConfig()
# This reads from STORAGE_THRESHOLD_KB; to override in code do:
config.storage_threshold_kb = 1
```

## Tracing controls

Per-agent:

```python
agent = Agent(
  ...,
  trace_enabled=True,
  trace_mask=["llm_call"],  # exclude noisy events
)
```

Per-tool:

```python
@tool(name="summarize", description="Summarize text", trace=True, trace_mask=["result"])
def summarize(...):
    ...
```
